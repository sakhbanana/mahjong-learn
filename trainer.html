<!-- trainer.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ğ¢Ñ€ĞµĞ½Ğ°Ğ¶Ñ‘Ñ€ â€” ĞšĞ¾Ñ€ĞµĞ¹ÑĞºĞ¸Ğ¹ Ğ¼Ğ°Ğ´Ğ¶Ğ¾Ğ½Ğ³</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Ğ¢Ñ€ĞµĞ½Ğ°Ğ¶Ñ‘Ñ€ Ğ¼Ğ°Ğ´Ğ¶Ğ¾Ğ½Ğ³Ğ° ğŸ€„</h1>
    <nav>
      <a href="index.html">Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ</a>
      <a href="lessons.html">Ğ£Ñ€Ğ¾ĞºĞ¸</a>
      <a href="trainer.html">Ğ¢Ñ€ĞµĞ½Ğ°Ğ¶Ñ‘Ñ€</a>
    </nav>
  </header>

  <main>
    <section class="section">
      <h2>Ğ¡Ğ¾Ğ±ĞµÑ€Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²ÑƒÑ Ñ€ÑƒĞºÑƒ!</h2>
      <p>ĞŸĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸ 14 Ñ‚Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ² Ñ€ÑƒĞºÑƒ. Ğ¦ĞµĞ»ÑŒ: 4 ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸ (ÑĞµÑ‚ Ğ¸Ğ»Ğ¸ Ñ€ÑĞ´) + 1 Ğ¿Ğ°Ñ€Ğ°.</p>

      <div class="hand" id="player-hand">
        <div class="instructions">Ğ¢Ğ²Ğ¾Ñ Ñ€ÑƒĞºĞ°</div>
      </div>

      <div id="result"></div>

      <h3>ĞšĞ¾Ğ»Ğ¾Ğ´Ñ‹ Ñ‚Ğ°Ğ¹Ğ»Ğ¾Ğ²</h3>
      <div id="tiles-bank"></div>

      <button id="check-btn" style="margin-top: 16px; padding: 8px 16px; font-size: 16px;">ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ€ÑƒĞºÑƒ</button>
    </section>
  </main>

  <script src="main.js"></script>
  <script>
    const tileSymbols = [
      'ğŸ€‡','ğŸ€ˆ','ğŸ€‰','ğŸ€Š','ğŸ€‹','ğŸ€Œ','ğŸ€','ğŸ€','ğŸ€',
      'ğŸ€™','ğŸ€š','ğŸ€›','ğŸ€œ','ğŸ€','ğŸ€','ğŸ€Ÿ','ğŸ€ ','ğŸ€¡',
      'ğŸ€','ğŸ€‘','ğŸ€’','ğŸ€“','ğŸ€”','ğŸ€•','ğŸ€–','ğŸ€—','ğŸ€˜',
      'ğŸ€€','ğŸ€','ğŸ€‚','ğŸ€ƒ','ğŸ€…','ğŸ€†'
    ];

    const tilesBank = document.getElementById('tiles-bank');
    const playerHand = document.getElementById('player-hand');
    const resultDiv = document.getElementById('result');
    const checkBtn = document.getElementById('check-btn');

    // Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ‚Ğ°Ğ¹Ğ»Ğ¾Ğ²
    for (let i = 0; i < 30; i++) {
      const tile = document.createElement('div');
      tile.className = 'tile';
      tile.textContent = tileSymbols[Math.floor(Math.random() * tileSymbols.length)];
      tile.draggable = true;

      tile.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', tile.textContent);
        tile.classList.add('dragging');
      });

      tile.addEventListener('dragend', () => tile.classList.remove('dragging'));
      tilesBank.appendChild(tile);
    }

    playerHand.addEventListener('dragover', e => e.preventDefault());
    playerHand.addEventListener('drop', e => {
      e.preventDefault();
      const char = e.dataTransfer.getData('text/plain');
      const newTile = document.createElement('div');
      newTile.className = 'tile';
      newTile.textContent = char;
      newTile.draggable = true;
      newTile.addEventListener('click', () => newTile.remove());
      if (playerHand.querySelector('.instructions')) playerHand.innerHTML = '';
      playerHand.appendChild(newTile);
    });

    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ÑƒĞºĞ¸
    checkBtn.addEventListener('click', () => {
      const handTiles = Array.from(playerHand.querySelectorAll('.tile')).map(t => t.textContent);
      
      if (handTiles.length !== 14) {
        resultDiv.innerHTML = '<p style="color: #c00;">Ğ’ Ñ€ÑƒĞºĞµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ 14 Ñ‚Ğ°Ğ¹Ğ»Ğ¾Ğ²!</p>';
        return;
      }

      const result = checkHand(handTiles);
      let msg = '';

      if (result.isComplete) {
        msg = '<p class="success">âœ… ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼! Ğ£ Ğ²Ğ°Ñ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ°Ñ Ñ€ÑƒĞºĞ°!</p>';
        // playSound('success');
      } else {
        msg = `<p>ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸: ${result.pungs.length} ÑĞµÑ‚(Ğ¾Ğ²), ${result.chows.length} Ñ€ÑĞ´(Ğ¾Ğ²). ĞŸĞ°Ñ€: ${result.pairs.length}.</p>`;
        if (result.pungs.length + result.chows.length < 4 || result.pairs.length === 0) {
          msg += '<p style="color:#c00;">ĞÑƒĞ¶Ğ½Ğ¾ 4 ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸ + 1 Ğ¿Ğ°Ñ€Ğ°.</p>';
        }
      }

      resultDiv.innerHTML = msg;
    });
  </script>
</body>
</html>
